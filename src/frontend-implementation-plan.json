{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Pre-chat quick options to guide the first message",
  "requirements": [
    {
      "id": "REQ-9",
      "summary": "Show four pre-chat quick option buttons (Study/Knowledge/Research/Other) in Chat empty state above the message input when there are zero messages and chat is not loading.",
      "acceptanceCriteria": [
        "When there are zero chat messages and the chat is not loading, the empty-state area shows four visible options: Study, Knowledge, Research, Other.",
        "When there is at least one chat message, these options are not shown (normal chat message list remains unchanged).",
        "All option labels are in English and match exactly: \"Study\", \"Knowledge\", \"Research\", \"Other\"."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/chat/PreChatQuickOptions.tsx",
          "operation": "create",
          "description": "Create a small, reusable pre-chat options UI that renders exactly four options (Study, Knowledge, Research, Other) using existing shadcn-ui components (e.g., Button) and supports a click callback. Verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/pages/ChatPage.tsx",
          "operation": "modify",
          "description": "Render the PreChatQuickOptions component only when `!isLoading && messages.length === 0`, placing it above the message input area while preserving the existing empty-state message/list UI. Verify the component's usage instructions before implementing."
        }
      ]
    },
    {
      "id": "REQ-10",
      "summary": "Make each pre-chat option prefill and focus the chat Textarea with an appropriate English prompt without sending automatically.",
      "acceptanceCriteria": [
        "Clicking \"Study\" prefills the input with a study-oriented prompt (English) and focuses the input.",
        "Clicking \"Knowledge\" prefills the input with a knowledge-base-oriented prompt (English) and focuses the input.",
        "Clicking \"Research\" prefills the input with a research-oriented prompt (English) and focuses the input.",
        "Clicking \"Other\" prefills the input with a general/open-ended prompt (English) and focuses the input.",
        "No chat message is sent until the user presses Enter (without Shift) or clicks the Send button.",
        "The Send button enable/disable logic continues to work based on whether the input is non-empty and whether a message is pending."
      ],
      "file_operations": [
        {
          "path": "frontend/src/pages/ChatPage.tsx",
          "operation": "modify",
          "description": "Add option click handling that sets `input` to an English prompt per option and focuses the Textarea via a React ref (without calling the existing send logic). Ensure Enter/Send behavior remains unchanged and send button disabled logic continues to depend on `input.trim()` and `sendMessage.isPending`. Verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/components/chat/PreChatQuickOptions.tsx",
          "operation": "modify",
          "description": "Expose an `onSelect(option)` (or equivalent) callback so ChatPage can prefill/focus input on click without triggering send; keep option labels exactly as required. Verify the component's usage instructions before implementing."
        }
      ]
    },
    {
      "id": "REQ-11",
      "summary": "Style pre-chat options to match the current theme using existing design system components, ensuring light/dark readability and responsive layout with no overflow.",
      "acceptanceCriteria": [
        "Quick options use existing design system components/styles already present in the app (no new UI library).",
        "Quick options are readable and visually distinct in both light and dark themes.",
        "The Chat page still renders correctly at mobile and desktop sizes, with no horizontal overflow introduced by the options."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/chat/PreChatQuickOptions.tsx",
          "operation": "modify",
          "description": "Use existing shadcn-ui components (e.g., Button) and existing Tailwind theme tokens/classes to present the options with appropriate spacing, flex-wrap, and hover/focus states that work in both light and dark mode, avoiding horizontal overflow on small screens. Verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/pages/ChatPage.tsx",
          "operation": "modify",
          "description": "Integrate the options into the existing empty-state/footer layout with consistent spacing (e.g., a small stack above the input area), ensuring the Chat page remains responsive and visually consistent with the current theme. Verify the component's usage instructions before implementing."
        }
      ]
    }
  ]
}